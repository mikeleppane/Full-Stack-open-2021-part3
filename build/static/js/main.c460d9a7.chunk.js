(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{41:function(e,n,t){"use strict";t.r(n);var r=t(15),c=t.n(r),o=t(3),a=t(4),u=t(1),s=t(0),i=function(e){var n=e.text,t=e.onButtonClick;return Object(s.jsx)("button",{style:{margin:"5px"},onClick:t,children:n})},l=function(e,n){return e.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())||e.number.toLowerCase().includes(n.toLowerCase())})).map((function(e){return Object(s.jsxs)("p",{children:[e.name," ",e.number]},e.name)}))},d=function(e){var n=e.persons,t=e.filter,r=e.onDeleteHandler;return Object(s.jsx)("div",{children:t?Object(s.jsx)("div",{children:l(n,t)}):Object(s.jsx)("div",{children:n.map((function(e){return Object(s.jsx)("div",{children:Object(s.jsxs)("p",{children:[e.name," ",e.number,Object(s.jsx)(i,{text:"delete",onButtonClick:function(){return r(e)}})]})},e.name)}))})})},b=function(e){var n=e.name,t=e.onNewFilterChange;return Object(s.jsx)("div",{children:Object(s.jsx)("form",{children:Object(s.jsxs)("div",{children:["filter shown with: ",Object(s.jsx)("input",{value:n,onChange:t})]})})})},j=function(e){var n=e.onSubmitHandler,t=e.name,r=e.handleNewPersonChange,c=e.number,o=e.handleNewNumberChange;return Object(s.jsx)("div",{children:Object(s.jsxs)("form",{onSubmit:n,children:[Object(s.jsxs)("div",{children:["name: ",Object(s.jsx)("input",{value:t,onChange:r})]}),Object(s.jsxs)("div",{children:["number: ",Object(s.jsx)("input",{value:c,onChange:o})]}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{type:"submit",children:"add"})})]})})},m=t(16),h=t.n(m).a.create({baseURL:"/api",timeout:5e3}),f=function(){return h.get("/persons").then((function(e){return e.data}))},p=function(e){return h.post("/persons",e).then((function(e){return e.data}))},O=function(e,n){return h.put("/persons/".concat(e),n).then((function(e){return e.data}))},g=function(e){return h.delete("/persons/".concat(e)).then()},x={color:"green",backGround:"lightgrey",fontSize:"20px",borderStyle:"solid",borderWidth:"3px",borderRadius:"5px",padding:"10px",marginBottom:"10px"},v=function(e){var n=e.message,t=e.type;if(!n)return null;var r={};return"success"===t?r=Object(o.a)(Object(o.a)({},x),{},{color:"green"}):"error"===t&&(r=Object(o.a)(Object(o.a)({},x),{},{color:"red"})),r?Object(s.jsx)("div",{style:r,children:n}):null},w=function(){var e=Object(u.useState)([]),n=Object(a.a)(e,2),t=n[0],r=n[1],c=Object(u.useState)(""),i=Object(a.a)(c,2),l=i[0],m=i[1],h=Object(u.useState)(""),x=Object(a.a)(h,2),w=x[0],y=x[1],C=Object(u.useState)(""),S=Object(a.a)(C,2),N=S[0],k=S[1],T=Object(u.useState)({type:"",message:""}),D=Object(a.a)(T,2),L=D[0],B=D[1];Object(u.useEffect)((function(){f().then((function(e){r(e)})).catch((function(e){console.log(e)}))}),[]);return Object(s.jsxs)("div",{children:[Object(s.jsx)("h2",{children:"Phonebook"}),Object(s.jsx)(v,{message:L.message,type:L.type}),Object(s.jsx)(b,{name:N,onNewFilterChange:function(e){k(e.target.value)}}),Object(s.jsx)("h3",{children:"Add a new"}),Object(s.jsx)(j,{onSubmitHandler:function(e){if(e.preventDefault(),l&&w){var n={name:l,number:w},c=t.find((function(e){return e.name===l}));if(c&&w!==c.number&&window.confirm("".concat(c.name," is already added to phonebook, replace the old number with a new one?"))){var a=Object(o.a)(Object(o.a)({},c),{},{number:w});O(c.id,a).then((function(e){B({type:"success",message:"Changed ".concat(a.name," number")}),setTimeout((function(){B({type:null,message:null})}),5e3),r(t.map((function(n){return c.id!==n.id?n:e})))})).catch((function(e){B({type:"error",message:"The person ".concat(a.name," was already deleted from server")}),setTimeout((function(){B({type:null,message:null})}),5e3),console.log(e)}))}c||p(n).then((function(e){B({type:"success",message:"Added ".concat(n.name)}),setTimeout((function(){B({type:null,message:null})}),5e3),r(t.concat(e))})).catch((function(e){B({type:"error",message:String(e.response.data.error)}),setTimeout((function(){B({type:null,message:null})}),5e3)}))}else window.alert("Please fill both fields for name and number.");m(""),y("")},name:l,handleNewPersonChange:function(e){m(e.target.value)},number:w,handleNewNumberChange:function(e){y(e.target.value)}}),Object(s.jsx)("h3",{children:"Numbers"}),Object(s.jsx)(d,{persons:t,filter:N,onDeleteHandler:function(e){window.confirm("Do you want to delete ".concat(e.name,"?"))&&g(e.id).then((function(){B({type:"success",message:"Deleted ".concat(e.name)}),setTimeout((function(){B({type:null,message:null})}),5e3),r(t.filter((function(n){return n.id!==e.id})))})).catch((function(e){console.log(e)}))}})]})};c.a.render(Object(s.jsx)(w,{}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.c460d9a7.chunk.js.map