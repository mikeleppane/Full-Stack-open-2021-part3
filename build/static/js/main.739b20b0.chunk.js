(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{41:function(e,n,t){"use strict";t.r(n);var c=t(15),r=t.n(c),o=t(3),a=t(4),u=t(1),i=t(0),s=function(e){var n=e.text,t=e.onButtonClick;return Object(i.jsx)("button",{style:{margin:"5px"},onClick:t,children:n})},l=function(e,n){return e.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())||e.number.toLowerCase().includes(n.toLowerCase())})).map((function(e){return Object(i.jsxs)("p",{children:[e.name," ",e.number]},e.name)}))},d=function(e){var n=e.persons,t=e.filter,c=e.onDeleteHandler;return Object(i.jsx)("div",{children:t?Object(i.jsx)("div",{children:l(n,t)}):Object(i.jsx)("div",{children:n.map((function(e){return Object(i.jsx)("div",{children:Object(i.jsxs)("p",{children:[e.name," ",e.number,Object(i.jsx)(s,{text:"delete",onButtonClick:function(){return c(e)}})]})},e.name)}))})})},b=function(e){var n=e.name,t=e.onNewFilterChange;return Object(i.jsx)("div",{children:Object(i.jsx)("form",{children:Object(i.jsxs)("div",{children:["filter shown with: ",Object(i.jsx)("input",{value:n,onChange:t})]})})})},j=function(e){var n=e.onSubmitHandler,t=e.name,c=e.handleNewPersonChange,r=e.number,o=e.handleNewNumberChange;return Object(i.jsx)("div",{children:Object(i.jsxs)("form",{onSubmit:n,children:[Object(i.jsxs)("div",{children:["name: ",Object(i.jsx)("input",{value:t,onChange:c})]}),Object(i.jsxs)("div",{children:["number: ",Object(i.jsx)("input",{value:r,onChange:o})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{type:"submit",children:"add"})})]})})},m=t(16),h=t.n(m).a.create({baseURL:"/api",timeout:5e3}),f=function(){return h.get("/persons").then((function(e){return e.data}))},p=function(e){return h.post("/persons",e).then((function(e){return e.data}))},O=function(e,n){return h.put("/persons/".concat(e),n).then((function(e){return e.data}))},g=function(e){return h.delete("/persons/".concat(e)).then()},x={color:"green",backGround:"lightgrey",fontSize:"20px",borderStyle:"solid",borderWidth:"3px",borderRadius:"5px",padding:"10px",marginBottom:"10px"},v=function(e){var n=e.message,t=e.type;if(!n)return null;var c={};return"success"===t?c=Object(o.a)(Object(o.a)({},x),{},{color:"green"}):"error"===t&&(c=Object(o.a)(Object(o.a)({},x),{},{color:"red"})),c?Object(i.jsx)("div",{style:c,children:n}):null},w=function(){var e=Object(u.useState)([]),n=Object(a.a)(e,2),t=n[0],c=n[1],r=Object(u.useState)(""),s=Object(a.a)(r,2),l=s[0],m=s[1],h=Object(u.useState)(""),x=Object(a.a)(h,2),w=x[0],y=x[1],C=Object(u.useState)(""),S=Object(a.a)(C,2),N=S[0],k=S[1],D=Object(u.useState)({type:"",message:""}),L=Object(a.a)(D,2),T=L[0],B=L[1];Object(u.useEffect)((function(){f().then((function(e){c(e)})).catch((function(e){console.log(e)}))}),[]);return Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{children:"Phonebook"}),Object(i.jsx)(v,{message:T.message,type:T.type}),Object(i.jsx)(b,{name:N,onNewFilterChange:function(e){k(e.target.value)}}),Object(i.jsx)("h3",{children:"Add a new"}),Object(i.jsx)(j,{onSubmitHandler:function(e){if(e.preventDefault(),l&&w){var n={name:l,number:w},r=t.find((function(e){return e.name===l}));if(r&&w!==r.number&&window.confirm("".concat(r.name," is already added to phonebook, replace the old number with a new one?"))){var a=Object(o.a)(Object(o.a)({},r),{},{number:w});O(r.id,a).then((function(e){B({type:"success",message:"Changed ".concat(a.name," number")}),setTimeout((function(){B({type:null,message:null})}),5e3),c(t.map((function(n){return r.id!==n.id?n:e})))})).catch((function(e){B({type:"error",message:"The person ".concat(a.name," was already deleted from server")}),setTimeout((function(){B({type:null,message:null})}),5e3),console.log(e)}))}r||p(n).then((function(e){B({type:"success",message:"Added ".concat(n.name)}),setTimeout((function(){B({type:null,message:null})}),5e3),c(t.concat(e))})).catch((function(e){console.log(e)}))}else window.alert("Please fill both fields for name and number.");m(""),y("")},name:l,handleNewPersonChange:function(e){m(e.target.value)},number:w,handleNewNumberChange:function(e){y(e.target.value)}}),Object(i.jsx)("h3",{children:"Numbers"}),Object(i.jsx)(d,{persons:t,filter:N,onDeleteHandler:function(e){window.confirm("Do you want to delete ".concat(e.name,"?"))&&g(e.id).then((function(){B({type:"success",message:"Deleted ".concat(e.name)}),setTimeout((function(){B({type:null,message:null})}),5e3),c(t.filter((function(n){return n.id!==e.id})))})).catch((function(e){console.log(e)}))}})]})};r.a.render(Object(i.jsx)(w,{}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.739b20b0.chunk.js.map